---
description: RFC 1058 - 路由信息协议（RIP），由Rutgers大学的C. Hedrick于1988年6月发布，是一种基于距离矢量算法的内部网关协议，用于在自治系统内交换路由信息，最大跳数限制为15跳
keywords:
  - RFC1058
  - RIP
  - 路由信息协议
  - Routing Information Protocol
  - 距离矢量算法
  - Distance Vector
  - IGP
  - 内部网关协议
  - Bellman-Ford算法
  - 路由协议
  - 网关
  - 跳数
  - 度量值
  - 路由表
  - 水平分割
  - Split Horizon
  - 触发更新
  - Triggered Updates
  - routed
properties:
  rfc_number: 1058
  title: "Routing Information Protocol"
  authors:
    - name: "C. Hedrick"
      organization: "Rutgers University"
  publication_date: "1988-06"
  status: "历史性文档"
  category: "路由协议"
  updated_by:
    - "RFC 2453"
  related_rfc:
    - "RFC 2453"
---
# RFC 1058 - 路由信息协议（RIP）

## 文档概述

RFC 1058是由Rutgers大学的C. Hedrick于1988年6月发布的路由协议规范文档，标题为"Routing Information Protocol"（路由信息协议）。

该文档描述了一种用于在网关和主机之间交换路由信息的现有协议。RIP基于Bellman-Ford（或称距离矢量）算法，旨在作为开发互联网社区中使用的网关软件的基础。该协议松散地基于4.3 Berkeley软件发行版中的"routed"程序。

RFC 1058的主要目标包括：
1. 记录当前广泛用于路由但从未正式文档化的协议和算法
2. 规定算法改进以提高大型网络中路由的稳定性
3. 建议可选功能以实现更大的可配置性和控制

## 历史背景

### 距离矢量算法的起源

距离矢量算法自ARPANET早期以来就用于计算机网络中的路由计算。该算法的最早描述可追溯到Ford和Fulkerson的工作，因此有时被称为Ford-Fulkerson算法。Bellman-Ford这个名称来自于该算法基于Bellman方程，这是"动态规划"的基础。

### RIP的演进历史

RIP的具体起源在于Xerox网络协议：

1. **PUP协议** - 使用网关信息协议（Gateway Information Protocol）交换路由信息
2. **XNS架构** - 采用了该协议的更新版本，命名为路由信息协议（Routing Information Protocol）
3. **Berkeley routed** - 与XNS的RIP基本相同，但将XNS地址替换为能够处理IP和其他类型地址的更通用地址格式，并将路由更新限制为每30秒一次

由于这种相似性，术语"路由信息协议"（或简称RIP）既指XNS协议，也指routed使用的协议。

### 互联网环境

RIP旨在用于基于IP的互联网。互联网被组织为由网关连接的多个网络。这些网络可以是点对点链路或更复杂的网络，如以太网或ARPANET。主机和网关接收寻址到某个主机的IP数据报。路由是主机或网关决定将数据报发送到何处的方法。

## 1. 引言

### 协议定位

RIP最适合作为"内部网关协议"（IGP）使用。在像当前互联网这样的全国性网络中，不太可能在整个网络中使用单一路由协议。相反，网络将被组织为"自治系统"的集合。

**自治系统**通常由单一实体管理，或至少具有一定程度的技术和管理控制。每个自治系统将有自己的路由技术，不同自治系统的路由技术可能不同。自治系统内使用的路由协议称为内部网关协议（IGP）。使用单独的协议在自治系统之间进行接口，最早的此类协议是EGP（外部网关协议），现在通常称为AS间路由协议。

### 适用场景

RIP设计用于使用相当同质技术的中等规模网络。因此，它适合作为许多校园和使用速度变化不大的串行线路的区域网络的IGP。它不适用于更复杂的环境。

### 1.1. 协议限制

该协议并不能解决所有可能的路由问题。如上所述，它主要用作中等规模、相当同质网络中的IGP。此外，应提及以下具体限制：

#### 15跳限制

协议限于最长路径涉及15跳的网络。设计者认为基本协议设计不适合更大的网络。注意，此限制假设每个网络使用成本1。这是RIP通常的配置方式。如果系统管理员选择使用更大的成本，15的上限很容易成为问题。

#### 计数到无穷大问题

协议依赖于"计数到无穷大"来解决某些不寻常的情况。如果网络系统有数百个网络，并且形成了涉及所有网络的路由环路，则环路的解决将需要大量时间（如果路由更新频率受限）或带宽（如果检测到更改时发送更新）。

#### 固定度量值

该协议使用固定"度量值"来比较备选路由。它不适合需要基于实时参数（如测量的延迟、可靠性或负载）选择路由的情况。允许此类度量值的明显扩展可能会引入协议无法处理的不稳定性。

### 1.2. 文档组织

本文档的主体分为两部分：

1. **第2节** - 距离矢量算法的概念发展和论证
2. **第3节** - 实际协议描述

这两节基本上可以独立阅读。第2节试图对算法的数学基础进行非正式介绍。第3节是实际的协议描述，除了对第2节的具体引用外，应该可以完全根据第3节中给出的规范实现RIP。

## 2. 距离矢量算法

### 基本概念

路由是从发送方到所需目的地找到路径的任务。在IP"Catenet模型"中，这主要归结为在网络之间找到网关的问题。只要消息保持在单个网络或子网上，任何路由问题都由特定于网络的技术解决。

距离矢量算法基于以下原理：每个网关维护一个路由表，其中包含到每个目的地的最佳已知距离以及使用的路由。这些表通过与相邻网关交换信息来更新。

### 2.1. 拓扑变化处理

当网络拓扑发生变化时，距离矢量算法能够自动调整路由表。网关定期向其邻居发送路由更新，包含其路由表中的信息。

### 2.2. 防止不稳定性

距离矢量算法可能会遇到路由环路和计数到无穷大的问题。为了防止这些不稳定性，RIP采用了几种技术：

#### 2.2.1. 水平分割（Split Horizon）

水平分割规则规定：不应将路由信息发送回该信息的来源方向。这有助于防止路由环路的形成。

#### 2.2.2. 触发更新（Triggered Updates）

触发更新是指当路由表发生变化时立即发送更新，而不是等待下一个定期更新周期。这有助于加快网络收敛速度。

## 3. 协议规范

### 3.1. 消息格式

RIP消息使用UDP端口520进行传输。每个消息包含一个命令字段和一系列路由条目。

### 3.2. 地址考虑

RIP支持IP地址和子网掩码。每个路由条目包含目标网络地址和到达该网络的度量值（跳数）。

### 3.3. 定时器

RIP使用三个主要定时器：
- **更新定时器**：每30秒发送一次常规更新
- **超时定时器**：180秒未收到更新则路由失效
- **垃圾收集定时器**：120秒后从路由表中删除失效路由

### 3.4. 输入处理

RIP实现必须处理两种类型的消息：

#### 3.4.1. 请求（Request）

请求消息用于请求路由信息。可以请求整个路由表或特定路由的信息。

#### 3.4.2. 响应（Response）

响应消息包含路由信息。它可以是对请求的响应，也可以是定期或触发的更新。

### 3.5. 输出处理

网关定期向所有相邻网关发送其完整路由表。应用水平分割规则以防止路由环路。

### 3.6. 兼容性

本文档中的RIP规范与现有实现兼容，包括Berkeley的routed程序。

## 4. 控制功能

RIP实现可以包括各种控制功能，以提供更大的灵活性和可配置性。

## 技术影响与意义

### RIP的历史地位

RIP是最早被广泛部署的动态路由协议之一，对互联网路由技术的发展产生了深远影响：

1. **简单性** - RIP的简单设计使其易于实现和部署
2. **广泛采用** - 成为小型网络的事实标准IGP
3. **教育价值** - 作为学习路由协议的入门教材

### 协议特点

**优点：**
- 配置简单，易于管理
- 实现成本低
- 适合小型同质网络

**缺点：**
- 15跳限制
- 收敛速度慢
- 不支持VLSM（可变长度子网掩码）

### 后续发展

RFC 1058定义的RIP版本后来被称为RIP-1。随后发展出了RIP-2（RFC 2453），增加了对VLSM、路由标签和认证的支持。

## 协议参数汇总

| 参数 | 值 |
|------|-----|
| UDP端口 | 520 |
| 最大跳数 | 15 |
| 无穷大度量值 | 16 |
| 更新间隔 | 30秒 |
| 超时时间 | 180秒 |
| 垃圾收集时间 | 120秒 |

## 总结

RFC 1058是路由信息协议（RIP）的第一个正式规范文档，记录了这个在互联网早期广泛使用但从未正式文档化的路由协议。

该文档基于Bellman-Ford距离矢量算法，定义了一种简单而有效的内部网关协议，适用于中等规模的同质网络。RIP使用跳数作为度量值，最大支持15跳的网络路径。

文档的主要贡献包括：

1. **正式化现有实践** - 将广泛使用的routed程序的行为正式文档化
2. **稳定性改进** - 引入水平分割和触发更新等机制提高路由稳定性
3. **互操作性** - 确保不同实现之间的兼容性

尽管RIP存在15跳限制、收敛速度慢等缺点，但其简单性和易于实现的特点使其成为小型网络的理想选择。RIP为后续更复杂的路由协议（如OSPF和BGP）的发展奠定了基础，在路由协议发展史上具有重要地位。

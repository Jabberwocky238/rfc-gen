---
description: RFC 1247 - OSPF Version 2，由J. Moy于1991年7月发布，是OSPF协议版本2的首个正式规范，取代了RFC 1131（OSPFv1）。文档定义了基于链路状态的动态路由协议，支持IP子网、TOS路由、区域路由、等价多路径和认证等特性
keywords:
  - RFC1247
  - OSPF
  - OSPFv2
  - OSPF Version 2
  - 链路状态路由
  - Link State
  - SPF算法
  - 最短路径优先
  - 内部网关协议
  - IGP
  - 动态路由
  - 区域路由
  - Area
  - LSA
  - 拓扑数据库
  - 路由协议
properties:
  rfc_number: 1247
  title: "OSPF Version 2"
  authors:
    - name: "J. Moy"
      organization: "Proteon, Inc."
  publication_date: "1991-07"
  status: "标准跟踪协议"
  obsoletes: "RFC 1131"
  category: "路由协议"
  related_rfc:
    - "RFC 1131"
    - "RFC 2328"
---
# RFC 1247 - OSPF Version 2

## 文档概述

RFC 1247是由John Moy于1991年7月发布的标准跟踪协议文档，标题为"OSPF Version 2"。这是OSPF协议版本2的首个正式规范，取代了RFC 1131中定义的OSPF Version 1。

**核心定义**：

OSPF（Open Shortest Path First）是一种基于链路状态的路由协议，设计用于在单个自治系统（AS）内部运行。每个OSPF路由器维护一个描述自治系统拓扑的相同数据库，并从该数据库通过构建最短路径树来计算路由表。

**主要特性**：

1. **快速收敛**：在拓扑变化时快速重新计算路由
2. **等价多路径**：支持等价成本的多条路径
3. **TOS路由**：可为每种IP服务类型计算单独的路由
4. **区域路由**：提供额外的路由保护层级和减少路由协议流量
5. **认证**：所有OSPF路由协议交换都经过认证
6. **IP子网支持**：明确支持IP子网划分
7. **外部路由标记**：支持标记外部派生的路由信息

## 历史背景

### OSPF的诞生

OSPF协议由IETF的OSPF工作组开发，专门为互联网环境设计。它代表了从传统的基于Bellman-Ford算法的路由协议（如RIP）向基于SPF或链路状态技术的转变。

### 从OSPFv1到OSPFv2

**OSPFv1的局限**：
- RFC 1131（1989年10月）定义了OSPF Version 1
- 存在可扩展性和扩展性问题
- 缺少一些关键特性

**OSPFv2的改进**：
- 支持可变长度子网掩码（VLSM）
- 支持无类域间路由（CIDR）
- 改进的可扩展性
- 更完善的区域支持
- 增强的认证机制

### RFC 1247的重要性

RFC 1247是OSPFv2的首个正式规范，为后续的OSPF发展奠定了基础。虽然后来被RFC 2328（1998）取代，但RFC 1247确立了OSPFv2的核心架构和机制。

## 协议概述

### 路由方式

OSPF基于目标IP地址和IP服务类型（TOS）路由IP数据包：
- IP数据包"按原样"路由，不进行额外封装
- 动态路由协议，快速检测拓扑变化
- 计算无环路由
- 收敛时间短，路由流量最小

### 链路状态技术

**拓扑数据库**：
- 每个路由器维护描述AS拓扑的数据库
- 所有参与路由器拥有相同的数据库
- 数据库的每个部分是特定路由器的本地状态
- 通过泛洪机制在整个AS中分发本地状态

**最短路径树**：
- 所有路由器并行运行相同的算法
- 每个路由器以自己为根构建最短路径树
- 该树给出到AS中每个目的地的路由
- 外部派生的路由信息作为叶子出现在树上

### 区域路由

OSPF允许将AS细分为区域：
- 区域是网络的逻辑分组
- 每个区域运行独立的链路状态算法
- 区域内的路由器维护该区域的拓扑数据库
- 减少了路由协议流量
- 提供了额外的路由保护层级

**骨干区域**：
- 所有区域必须连接到骨干区域
- 骨干区域负责在区域之间分发路由信息
- 骨干区域本身也是一个标准的OSPF区域

### 等价多路径

OSPF支持等价成本的多条路径：
- 当到达目的地有多条等价路径时
- 流量可以在这些路径之间分配
- 提高了网络利用率和可靠性

### TOS路由

OSPF可以为不同的IP服务类型计算不同的路由：
- 支持基于TOS的路由决策
- 可以为不同服务质量需求选择不同路径
- 提供了更细粒度的路由控制

### 认证

OSPF提供路由交换的认证机制：
- 所有OSPF协议交换都可以被认证
- 防止恶意或错误的路由信息注入
- 提高了网络安全性

## 技术意义与影响

### 链路状态路由的里程碑

RFC 1247标志着链路状态路由协议在互联网中的正式确立：
- 克服了距离矢量协议（如RIP）的局限性
- 提供了更快的收敛速度
- 支持更大规模的网络
- 成为企业和运营商网络的首选IGP

### 对互联网发展的贡献

OSPFv2的引入对互联网发展产生了深远影响：
- 支持VLSM和CIDR，有效利用IP地址空间
- 区域路由概念支持大规模网络的层次化设计
- 为互联网的快速增长提供了可扩展的路由解决方案

### 协议演进的基础

RFC 1247为OSPF的后续发展奠定了坚实基础：
- 确立了OSPF的核心架构和机制
- 后续版本（RFC 2328）在此基础上改进和完善
- OSPFv3（RFC 5340）继承了相同的设计理念

## 总结

RFC 1247作为OSPF Version 2的首个正式规范，标志着现代链路状态路由协议在互联网中的确立。文档定义了一个基于SPF算法的动态路由协议，克服了传统距离矢量协议的局限性。

**核心贡献**：

1. **链路状态技术**：引入基于拓扑数据库和最短路径树的路由计算
2. **区域路由**：支持层次化网络设计，提高可扩展性
3. **VLSM/CIDR支持**：有效利用IP地址空间
4. **快速收敛**：在拓扑变化时快速重新计算路由
5. **等价多路径**：支持负载均衡和冗余

**历史地位**：

虽然RFC 1247后来被RFC 2328取代，但它在OSPF发展史上具有重要地位：
- 首次完整定义了OSPFv2的核心机制
- 为OSPF在全球范围内的部署铺平了道路
- 证明了链路状态路由协议的实用性和优越性

RFC 1247展示了如何设计一个既强大又灵活的路由协议，其核心设计理念至今仍在OSPFv2和OSPFv3中延续。

## 参考资料

1. RFC 1131: OSPF Version 1（被RFC 1247取代）

2. RFC 2328: OSPF Version 2（取代RFC 1247，当前OSPFv2标准）

3. RFC 5340: OSPF for IPv6（OSPFv3）

4. RFC 2370: The OSPF Opaque LSA Option

5. RFC 3101: The OSPF Not-So-Stubby Area (NSSA) Option
